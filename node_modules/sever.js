//IMPORT MODULES
var Sequelize = require('sequelize');

// db config
var env = "development";
var config = require('../config/config.json')[env];
var user = config.username;
var db = config.database;
var password = config.password ? config.password : null;


// initialize database connection
var sequelize = new Sequelize(
  db,user,password,
  {
    logging: console.log,
    define: {
      timestamps: false
    }
  },
  {
  host: 'localhost',
  dialect: 'mysql',
  pool: {
    max: 5,
    min: 0,
    idle: 10000
  }
});

//Test sequelize
sequelize.authenticate().then(function(err) {
    console.log('Connection has been established successfully.');
  })
  .catch(function (err) {
    console.log('Unable to connect to the database:', err);
  });

exports.sequelize = sequelize;